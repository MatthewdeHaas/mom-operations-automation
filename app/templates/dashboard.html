{% extends "base.html" %}

{% block body %}


  <div class="flex flex-col justify-center w-full pt-10">

    <p class="text-3xl font-bold text-center text-pink-400">Dashboard</p>

    <div class="mt-10 flex flex-row space-x-6 justify-center w-full items-start">

      <form class="flex flex-col"
            hx-post="/generate"
            hx-swap="innerHTML"
            hx-target="#submit-message-download"
            hx-on::before-request="showSpinner();"
            hx-on::after-request="if (event.detail.successful && event.target === this){
            hideSpinner();
            download();
            this.reset();
            }"
      >

        <p class="text-xl text-pink-400 font-md">Generate data for a given week</p>

        <input 
          type="text" 
          name="url"
          placeholder="URL" 
          class="border rounded-sm border-pink-400 focus:outline-none border-black mt-2 p-2"
          autocomplete="off"
          required
        >

        <input 
          type="number" 
          name="week"
          placeholder="Week" 
          class="border rounded-sm border-pink-400 focus:outline-none border-black mt-2 p-2
                outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"
          autocomplete="off"
          min=0
          required
        >

        <div class="flex flex-row my-2">
          <input 
          type="checkbox"
          name="email"
          id="email"
          class="accent-pink-400"
          >
          <label for="email" class="ml-4">Share to Email</label>
        </div>

        <button class="border-2 border-pink-400 text-pink-400 rounded-md border-black mt-2 p-2" type="submit">
          Download
        </button>

        <p id="submit-message-download" class="text-pink-400 font-md"></p>
        <div id="loading" class="flex flex-col hidden justify-center items-center w-full pt-4">
          <div class="w-8 h-8 border-4 border-blue-500 border-dashed rounded-full animate-spin"></div>
        </div>

      </form>

    </div>
  
  
  </div>


{% endblock %}
